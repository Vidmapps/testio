{"ast":null,"code":"var _jsxFileName = \"/Users/vidmantasburba/Desktop/FrontEnd/frontend_oxylabs/testio/src/GetServers.js\";\nimport { Component } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass GetServers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      servers: []\n    };\n    this.componentDidMount = this.componentDidMount.bind(this);\n  }\n\n  componentDidMount() {\n    async function getToken() {\n      const response = await fetch('https://playground.oxylabs.io/api/user/login', {\n        method: 'POST',\n        headers: {\n          \"Content-Type\": 'application/json'\n        },\n        body: JSON.stringify({\n          \"username\": \"oxylabs\",\n          \"password\": \"partyanimal\"\n        })\n      });\n      const data = await response.json();\n      return data.token;\n    }\n\n    async function getServerList(token) {\n      const response = await fetch('https://playground.oxylabs.io/api/servers', {\n        method: 'GET',\n        headers: {\n          \"Content-Type\": 'application/json',\n          \"x-access-token\": token\n        }\n      }).then(json => {\n        localStorage.setItem(\"servers\", JSON.stringify(json.results));\n        this.setState({\n          servers: JSON.parse(localStorage.getItem(\"servers\"))\n        });\n      });\n      const data = await response.json();\n      return data;\n    }\n\n    async function run() {\n      const token = await getToken();\n      const serverList = await getServerList(token);\n      console.log(serverList);\n    }\n\n    run();\n  }\n\n  render() {\n    const {\n      servers\n    } = this.state;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"GetServers\",\n      children: servers\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 9\n    }, this);\n  }\n\n}\n\nexport default GetServers;","map":{"version":3,"sources":["/Users/vidmantasburba/Desktop/FrontEnd/frontend_oxylabs/testio/src/GetServers.js"],"names":["Component","GetServers","constructor","props","state","servers","componentDidMount","bind","getToken","response","fetch","method","headers","body","JSON","stringify","data","json","token","getServerList","then","localStorage","setItem","results","setState","parse","getItem","run","serverList","console","log","render"],"mappings":";AAAA,SAASA,SAAT,QAA0B,OAA1B;;;AAEA,MAAMC,UAAN,SAAyBD,SAAzB,CAAmC;AACjCE,EAAAA,WAAW,CAACC,KAAD,EAAQ;AACjB,UAAMA,KAAN;AACA,SAAKC,KAAL,GAAa;AACXC,MAAAA,OAAO,EAAE;AADE,KAAb;AAGA,SAAKC,iBAAL,GAAyB,KAAKA,iBAAL,CAAuBC,IAAvB,CAA4B,IAA5B,CAAzB;AAED;;AACCD,EAAAA,iBAAiB,GAAG;AAChB,mBAAeE,QAAf,GAA0B;AACtB,YAAMC,QAAQ,GAAG,MAAMC,KAAK,CAAC,8CAAD,EAAiD;AAC1EC,QAAAA,MAAM,EAAE,MADkE;AAE1EC,QAAAA,OAAO,EAAE;AAAE,0BAAgB;AAAlB,SAFiE;AAG1EC,QAAAA,IAAI,EAAEC,IAAI,CAACC,SAAL,CAAe;AACnB,sBAAY,SADO;AAEnB,sBAAY;AAFO,SAAf;AAHoE,OAAjD,CAA5B;AASC,YAAMC,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAT,EAAnB;AAEA,aAAOD,IAAI,CAACE,KAAZ;AACF;;AAED,mBAAeC,aAAf,CAA6BD,KAA7B,EAAoC;AAClC,YAAMT,QAAQ,GAAG,MAAMC,KAAK,CAAC,2CAAD,EAA8C;AACvEC,QAAAA,MAAM,EAAE,KAD+D;AAEvEC,QAAAA,OAAO,EAAE;AACP,0BAAgB,kBADT;AAEP,4BAAkBM;AAFX;AAF8D,OAA9C,CAAL,CAOrBE,IAPqB,CAOfH,IAAD,IAAU;AACfI,QAAAA,YAAY,CAACC,OAAb,CAAqB,SAArB,EAAgCR,IAAI,CAACC,SAAL,CAAeE,IAAI,CAACM,OAApB,CAAhC;AACA,aAAKC,QAAL,CAAc;AACZnB,UAAAA,OAAO,EAAES,IAAI,CAACW,KAAL,CAAWJ,YAAY,CAACK,OAAb,CAAqB,SAArB,CAAX;AADG,SAAd;AAGD,OAZsB,CAAvB;AAcA,YAAMV,IAAI,GAAG,MAAMP,QAAQ,CAACQ,IAAT,EAAnB;AAEA,aAAOD,IAAP;AACD;;AAED,mBAAeW,GAAf,GAAqB;AACnB,YAAMT,KAAK,GAAG,MAAMV,QAAQ,EAA5B;AACA,YAAMoB,UAAU,GAAG,MAAMT,aAAa,CAACD,KAAD,CAAtC;AAGAW,MAAAA,OAAO,CAACC,GAAR,CAAYF,UAAZ;AACD;;AAEDD,IAAAA,GAAG;AACR;;AAEHI,EAAAA,MAAM,GAAG;AACP,UAAM;AAAC1B,MAAAA;AAAD,QAAY,KAAKD,KAAvB;AACA,wBACI;AAAK,MAAA,SAAS,EAAC,YAAf;AAAA,gBAA6BC;AAA7B;AAAA;AAAA;AAAA;AAAA,YADJ;AAGD;;AA7DgC;;AAgEnC,eAAeJ,UAAf","sourcesContent":["import { Component } from \"react\";\n\nclass GetServers extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      servers: [],\n    };\n    this.componentDidMount = this.componentDidMount.bind(this)\n\n  }\n    componentDidMount() {\n        async function getToken() {\n            const response = await fetch('https://playground.oxylabs.io/api/user/login', {\n               method: 'POST',\n               headers: { \"Content-Type\": 'application/json' },\n               body: JSON.stringify({\n                 \"username\": \"oxylabs\",\n                 \"password\": \"partyanimal\",\n               })\n             });\n          \n             const data = await response.json();\n          \n             return data.token;\n          }\n          \n          async function getServerList(token) {\n            const response = await fetch('https://playground.oxylabs.io/api/servers', {\n               method: 'GET',\n               headers: {\n                 \"Content-Type\": 'application/json',\n                 \"x-access-token\": token,\n               },\n             })\n             .then((json) => {\n              localStorage.setItem(\"servers\", JSON.stringify(json.results));\n              this.setState({\n                servers: JSON.parse(localStorage.getItem(\"servers\")),\n              });\n            });\n          \n            const data = await response.json();\n          \n            return data;\n          }\n          \n          async function run() {\n            const token = await getToken();\n            const serverList = await getServerList(token);\n            \n            \n            console.log(serverList);\n          }\n          \n          run();\n    }\n\n  render() {\n    const {servers} = this.state\n    return (\n        <div className=\"GetServers\">{servers}</div>\n    )\n  }\n}\n\nexport default GetServers;\n"]},"metadata":{},"sourceType":"module"}